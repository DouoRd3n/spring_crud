<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<h2>Order Table</h2>
<table id="ordersTable">
    <form actions="#">
        <input id="order_owner" placeholder="Order owner">
        <input id="order_address" placeholder="Order address">
        <input type="date" id="order_local_date" placeholder="Order local_date">
        <input id="order_problem_type" placeholder="Order problem_type">
        <input id="order_operator" placeholder="Order operator">
        <input id="order_user_id" placeholder="Order user_id">
        <input id="order_electric" placeholder="Order electric">
        <button onclick="createOrder()">Create order</button>
        <input>
    </form>
</table>
<script>

    function deleteOrder(orderId) {
        var xhttp = new XMLHttpRequest();
        xhttp.open("DELETE", "http://localhost:8080/order/delete/" + orderId, true);
        xhttp.send();
    }

    function loadOrder() {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var orders = JSON.parse(this.responseText);
                var html =  '<tr>\n' +
                            '<th>Order id</th>\n' +
                            '<th>Order owner</th>\n' +
                            '<th>Order address</th>\n' +
                            '<th>Order localDate</th>\n' +
                            '<th>Order problemType</th>\n' +
                            '<th>Order operator</th>\n' +
                            '<th>Order electric</th>\n' +
                            '</tr>'
                for (var i = 0; i < orders.length; i++){
                var order = orders[i];
                console.log(order)
                http = html + '<tr>\n' +
                    '<td>' + order.id + '</td>\n' +
                    '<td>' + order.owner + '</td>\n' +
                    '<td>' + order.address + '</td>\n' +
                    '<td> ' + order.localDate + '</td>\n' +
                    '<td>' + order.problemType + '</td>\n' +
                    '<td>' + order.operator + '</td>\n' +
                    '<td>' + order.electric + '</td>\n' +
                    '<td><button onclick="deleteUser(' + order.id + ')">Delete</button></td></tr>';

                }
                document.getElementById("ordersTable").innerHTML = html;
            }
            };
        xhttp.open("GET", "http://localhost:8080/order/findAll", true);
        xhttp.send();
        }

        function createOrder() {
            var orderOwner = document.getElementById("order_owner").value;
            var orderAddress = document.getElementById("order_address").value;
            var orderLocalDate = document.getElementById("order_local_date").value;
            var orderProblemType = document.getElementById("order_problem_type").value;
            var orderOperator = document.getElementById("order_operator").value;
            var orderUserId = document.getElementById("order_user_id").value;
            var orderElectric = document.getElementById("order_electric").value;

            var xmlhttp = new XMLHttpRequest("POST", "http://localhost:8080/order/save");
            xmlhttp.open("POST", "http://localhost:8080/order/save");
            xmlhttp.setRequestHeader("Content-Type", "application/json");
            xmlhttp.send(JSON.stringify({
                owner: orderOwner, address: orderAddress,
                localDate: orderLocalDate, problemType: orderProblemType,
                operator: orderOperator, userId: orderUserId, electric: orderElectric
            }))


        }
    loadOrder();
</script>
</body>
</html>